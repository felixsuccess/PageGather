# 读书记录应用需求文档

## 介绍

这是一个基于 Android 平台的读书记录应用，使用 Jetpack Compose、Kotlin 和 Material 3 设计系统开发。该应用旨在帮助用户记录和管理他们的阅读历程，包括正在阅读的书籍、已完成的书籍、阅读进度跟踪以及个人阅读笔记。

## 需求

### 需求 1 - 书籍管理

**用户故事：** 作为一个读者，我想要添加和管理我的书籍库，以便我可以跟踪我想读、正在读和已读完的书籍。

#### 验收标准

1. WHEN 用户点击添加书籍按钮 THEN 系统 SHALL 显示书籍信息输入表单
2. WHEN 用户输入书籍标题、作者、ISBN（可选）和封面图片（可选） THEN 系统 SHALL 验证必填字段并保存书籍信息
3. WHEN 用户输入 ISBN 码 THEN 系统 SHALL 验证 ISBN 格式的有效性（支持 ISBN-10 和 ISBN-13）
4. WHEN 用户扫描书籍条形码 THEN 系统 SHALL 自动识别 ISBN 并尝试获取书籍信息
5. WHEN 系统识别到有效 ISBN THEN 系统 SHALL 尝试从在线数据库获取书籍详细信息（标题、作者、封面等）
6. WHEN 用户查看书籍列表 THEN 系统 SHALL 按状态分类显示书籍（想读、在读、已读、弃读）
7. WHEN 用户长按书籍项目 THEN 系统 SHALL 显示编辑和删除选项
8. WHEN 用户搜索书籍 THEN 系统 SHALL 根据标题、作者或 ISBN 进行模糊匹配并显示结果
9. WHEN 用户切换书籍状态（想读 → 在读 → 已读 → 弃读） THEN 系统 SHALL 提供一键切换入口（如详情页状态按钮）并记录状态变更时间
10. WHEN 书籍无自定义封面 THEN 系统 SHALL 显示默认封面（按分类/主题生成差异化默认图）
11. WHEN 用户查看书籍列表 THEN 系统 SHALL 支持按"添加时间/阅读进度/标题首字母"排序
12. WHEN 系统从在线数据库获取封面失败 THEN 系统 SHALL 提供手动上传封面的备用选项

### 需求 1.1 - 书籍分类和元信息管理

**用户故事：** 作为一个读者，我想要为书籍添加分类和详细的元信息，以便我可以更好地组织和管理我的书籍收藏。

#### 验收标准

1. WHEN 用户添加或编辑书籍 THEN 系统 SHALL 支持选择或自定义书籍分类（如小说、传记、科技、历史等）
2. WHEN 用户输入书籍元信息 THEN 系统 SHALL 支持记录出版社、出版日期、页数、语言和书籍简介
3. WHEN 用户为书籍添加标签 THEN 系统 SHALL 支持自定义标签系统用于个性化分类
4. WHEN 用户查看书籍详情 THEN 系统 SHALL 显示完整的元信息包括分类、标签、出版信息和统计数据
5. WHEN 用户按分类筛选书籍 THEN 系统 SHALL 提供分类筛选器并显示每个分类的书籍数量
6. WHEN 用户按标签筛选书籍 THEN 系统 SHALL 支持多标签组合筛选功能
7. WHEN 用户查看分类统计 THEN 系统 SHALL 显示各分类的阅读进度和完成情况
8. IF 用户从在线数据库获取书籍信息 THEN 系统 SHALL 自动填充可用的元信息字段
9. WHEN 用户管理分类 THEN 系统 SHALL 支持添加/编辑/删除自定义分类（含分类图标选择）
10. WHEN 用户批量管理标签 THEN 系统 SHALL 提供标签重命名/合并/删除功能
11. WHEN 从 ISBN 获取元信息 THEN 系统 SHALL 自动填充页数信息（用于进度百分比计算）
12. WHEN 书籍元信息不完整 THEN 系统 SHALL 在详情页显示"补充信息"提示（可选操作）

### 需求 1.2 - 书籍详情页面展示

**用户故事：** 作为一个读者，我想要一个信息清晰、功能集中的书籍详情页面，以便快速获取书籍关键信息并便捷地进行阅读相关操作（如更新进度、添加笔记等）。

#### 验收标准

1. WHEN 用户点击书籍列表中的某本书籍 THEN 系统 SHALL 跳转至该书籍的详情页面，顶部显示书籍封面（大图）、标题和作者
2. WHEN 书籍详情页加载完成 THEN 系统 SHALL 按区域展示核心信息：基础信息区（ISBN、出版社、出版日期、页数、语言）、状态与进度区、分类标签区
3. WHEN 用户在详情页操作 THEN 系统 SHALL 在封面下方提供快捷功能按钮栏，包含状态切换按钮、编辑书籍按钮、笔记按钮
4. WHEN 书籍处于"在读"状态 THEN 系统 SHALL 在进度区显示"更新进度"入口，根据书籍信息类型显示对应的进度更新方式（页数/章节/百分比）
5. WHEN 用户查看详情页下滑 THEN 系统 SHALL 显示书籍简介（支持长文本折叠/展开）和阅读统计卡片
6. WHEN 用户点击分类标签区的标签 THEN 系统 SHALL 自动筛选显示同标签的其他书籍
7. WHEN 书籍存在阅读记录 THEN 系统 SHALL 在详情页底部显示"阅读历史"入口
8. WHEN 书籍处于"已读"状态 THEN 系统 SHALL 显示用户评分和评价内容，并提供"重新阅读"选项
9. WHEN 详情页加载缓慢 THEN 系统 SHALL 先显示骨架屏占位，数据加载完成后平滑替换
10. WHEN 用户在详情页进行操作 THEN 系统 SHALL 实时更新页面相关数据（无需手动刷新）

### 需求 1.3 - 书籍来源与购买信息管理

**用户故事：** 作为一个读者，我想要记录书籍的来源和购买信息，以便追踪我的书籍获取渠道和阅读投入。

#### 验收标准

1. WHEN 用户添加或编辑书籍 THEN 系统 SHALL 支持记录书籍来源（如微信读书、亚马逊、实体书店等）
2. WHEN 用户输入来源信息 THEN 系统 SHALL 支持自定义新来源并自动保存到来源列表
3. WHEN 用户记录购买信息 THEN 系统 SHALL 支持输入购买日期和购买价格
4. WHEN 用户查看书籍详情 THEN 系统 SHALL 显示来源、购买日期和价格信息（若已填写）
5. WHEN 用户按来源筛选书籍 THEN 系统 SHALL 提供来源筛选器并显示每个来源的书籍数量
6. WHEN 导入书籍数据包含来源信息 THEN 系统 SHALL 自动创建不存在的来源分类

### 需求 1.4 - 书籍类型与页码单位细化

**用户故事：** 作为一个阅读多种类型书籍的读者，我想要区分纸质书和电子书，并根据书籍类型选择合适的页码单位，以便更精准地记录阅读位置。

#### 验收标准

1. WHEN 用户添加书籍 THEN 系统 SHALL 要求选择书籍类型（纸质书/电子书）
2. WHEN 用户选择进度单位 THEN 系统 SHALL 支持"页码/章节/百分比"三种类型选择
3. WHEN 用户选择页码单位 THEN 系统 SHALL 要求设置总页数，显示"第 X 页/共 Y 页"格式
4. WHEN 用户选择章节单位 THEN 系统 SHALL 要求设置总章节数，显示"第 X 章/共 Y 章"格式
5. WHEN 用户选择百分比单位 THEN 系统 SHALL 直接记录 0-100%进度，无需设置总数
6. WHEN 书籍类型为纸质书 THEN 系统 SHALL 默认使用页码单位（可手动修改）
7. WHEN 书籍类型为电子书 THEN 系统 SHALL 默认使用百分比单位（可手动修改为页码或章节）
8. WHEN 书籍信息不完整 THEN 系统 SHALL 自动选择百分比单位作为备选方案

### 需求 2 - 阅读进度跟踪

**用户故事：** 作为一个读者，我想要记录我的阅读进度，以便我可以看到自己在每本书上的进展情况。

#### 验收标准

1. WHEN 用户选择一本正在阅读的书籍 THEN 系统 SHALL 显示当前阅读进度和更新选项
2. WHEN 用户输入当前页数或章节 THEN 系统 SHALL 计算并显示阅读百分比
3. WHEN 用户完成一本书 THEN 系统 SHALL 自动将书籍状态更改为"已读"并记录完成日期
4. WHEN 用户查看进度统计 THEN 系统 SHALL 显示每日、每周、每月的阅读页数统计
5. IF 用户设置了阅读目标 THEN 系统 SHALL 显示目标完成进度
6. WHEN 用户打开"在读"书籍 THEN 系统 SHALL 显示"继续阅读"入口（跳转至上次阅读位置记录）
7. WHEN 用户设置章节进度 THEN 系统 SHALL 支持按"章节/总章节"比例计算进度（与页数进度并行显示）
8. WHEN 用户长期未更新进度（如 7 天） THEN 系统 SHALL 推送轻度提醒（可在设置中关闭）
9. WHEN 用户更新进度 THEN 系统 SHALL 根据书籍设置的进度单位显示对应的输入界面（页码输入/章节选择/百分比滑块）
10. WHEN 书籍使用页码单位 THEN 系统 SHALL 显示"第 X 页/共 Y 页"格式并支持页码输入
11. WHEN 书籍使用章节单位 THEN 系统 SHALL 显示"第 X 章/共 Y 章"格式并支持章节选择
12. WHEN 书籍使用百分比单位 THEN 系统 SHALL 显示百分比进度条并支持滑块调节

### 需求 2.1 - 阅读计时功能

**用户故事：** 作为一个读者，我想要使用计时器来管理我的阅读时间，以便我可以更好地控制阅读节奏和专注度。

#### 验收标准

1. WHEN 用户开始阅读会话 THEN 系统 SHALL 提供正向计时器选项来记录已阅读时间
2. WHEN 用户设置阅读时间目标 THEN 系统 SHALL 提供反向计时器选项来倒计时剩余时间
3. WHEN 正向计时器运行 THEN 系统 SHALL 实时显示已经过的阅读时间（时:分:秒格式）
4. WHEN 反向计时器运行 THEN 系统 SHALL 实时显示剩余阅读时间并在时间到达时发出提醒
5. WHEN 用户暂停或停止计时器 THEN 系统 SHALL 记录本次阅读会话的时长并保存到阅读历史
6. WHEN 计时器在后台运行 THEN 系统 SHALL 在通知栏显示当前计时状态
7. WHEN 反向计时器归零 THEN 系统 SHALL 播放提醒音并显示完成通知
8. IF 用户设置了休息提醒 THEN 系统 SHALL 在指定间隔时间提醒用户休息
9. WHEN 计时器暂停后重新开始 THEN 系统 SHALL 累计计时（不重置已记录时间）
10. WHEN 同一天内多次阅读同一本书 THEN 系统 SHALL 自动合并计时数据（显示当日总时长）
11. WHEN 用户设置休息提醒 THEN 系统 SHALL 支持自定义间隔时间（15-60 分钟）和提醒方式（震动/铃声/静默通知）

### 需求 2.2 - 阅读记录和历史

**用户故事：** 作为一个读者，我想要查看详细的阅读记录和历史，以便我可以了解自己的阅读习惯和进步情况。

#### 验收标准

1. WHEN 用户完成一次阅读会话 THEN 系统 SHALL 自动记录阅读时间、页数进度、日期和书籍信息
2. WHEN 用户查看阅读历史 THEN 系统 SHALL 按时间顺序显示所有阅读会话记录
3. WHEN 用户查看单本书的阅读记录 THEN 系统 SHALL 显示该书的所有阅读会话、总时长和进度变化
4. WHEN 用户查看每日阅读记录 THEN 系统 SHALL 显示当天的阅读时长、页数和涉及的书籍
5. WHEN 用户手动添加阅读记录 THEN 系统 SHALL 支持补录历史阅读数据
6. WHEN 用户编辑阅读记录 THEN 系统 SHALL 允许修改时间、页数和添加备注
7. WHEN 用户删除阅读记录 THEN 系统 SHALL 要求确认并更新相关统计数据
8. WHEN 用户导出阅读记录 THEN 系统 SHALL 生成包含详细记录的报告文件
9. IF 用户设置了阅读目标 THEN 系统 SHALL 在记录中显示目标完成进度
10. WHEN 用户筛选阅读记录 THEN 系统 SHALL 支持按"时间段（本周/本月/自定义）""书籍分类"筛选
11. WHEN 用户导出记录 THEN 系统 SHALL 提供 CSV（数据表格）和 PDF（图文报告）两种格式选项
12. WHEN 阅读记录被修改 THEN 系统 SHALL 保留修改日志（显示"修改时间+修改内容"）

### 需求 2.3 - 阅读时长记录方式扩展

**用户故事：** 作为一个读者，我希望灵活记录阅读时长，既能精确记录开始和结束时间，也能模糊记录某天的阅读时长，以便适应不同的记录场景。

#### 验收标准

1. WHEN 用户进行实时阅读 THEN 系统 SHALL 支持记录精确阅读时长（包含开始时间、结束时间和结束位置）
2. WHEN 用户补录历史阅读 THEN 系统 SHALL 支持记录模糊阅读时长（包含日期、时长和位置）
3. WHEN 系统统计阅读时长 THEN 系统 SHALL 自动合并精确和模糊记录的时长数据
4. WHEN 用户查看阅读记录 THEN 系统 SHALL 区分显示精确记录（带具体时间）和模糊记录（仅日期）
5. WHEN 精确记录的开始/结束时间跨天 THEN 系统 SHALL 按日期拆分统计时长
6. WHEN 用户编辑阅读时长记录 THEN 系统 SHALL 支持在精确和模糊记录类型间切换

### 需求 3 - 阅读笔记和评价

**用户故事：** 作为一个读者，我想要为书籍添加笔记和评价，以便我可以记录重要的想法和感受。

#### 验收标准

1. WHEN 用户点击书籍详情页的笔记按钮 THEN 系统 SHALL 显示笔记编辑界面
2. WHEN 用户输入笔记内容 THEN 系统 SHALL 自动保存并显示创建时间
3. WHEN 用户为书籍评分 THEN 系统 SHALL 接受 1-5 星评分并保存
4. WHEN 用户查看笔记列表 THEN 系统 SHALL 按时间倒序显示所有笔记
5. WHEN 用户搜索笔记 THEN 系统 SHALL 根据关键词在笔记内容中进行搜索
6. WHEN 用户为书籍添加评价 THEN 系统 SHALL 支持"1-5 星+文字评价"组合记录（文字评价可选）
7. WHEN 用户管理笔记 THEN 系统 SHALL 支持为单条笔记添加标签（便于按笔记标签筛选）
8. WHEN 用户删除笔记 THEN 系统 SHALL 提供"移至回收站（保留 7 天）"选项（避免误删）

### 需求 3.2 - 书摘管理

**用户故事：** 作为一个读者，我想要记录书籍中的关键段落和精彩内容作为书摘，以便后续回顾和引用。

#### 验收标准

1. WHEN 用户阅读时遇到重要内容 THEN 系统 SHALL 提供书摘添加入口，支持手动输入或拍照识别文本
2. WHEN 用户添加书摘 THEN 系统 SHALL 允许记录来源页码和添加个人批注
3. WHEN 用户查看书籍的书摘 THEN 系统 SHALL 按页码顺序或添加时间展示所有书摘
4. WHEN 用户管理书摘 THEN 系统 SHALL 支持为书摘添加标签（与笔记标签系统互通）
5. WHEN 用户搜索书摘 THEN 系统 SHALL 支持按关键词在书摘内容和批注中检索
6. WHEN 用户分享书摘 THEN 系统 SHALL 生成包含书籍信息、原文内容和个人批注的分享卡片
7. WHEN 用户拍照识别书摘文本 THEN 系统 SHALL 提供 OCR 文字识别功能并允许手动修正识别结果
8. WHEN 书摘与笔记关联 THEN 系统 SHALL 支持在笔记中引用书摘（自动标注来源）

### 需求 3.3 - 富文本笔记编辑

**用户故事：** 作为一个读者，我想要使用富文本格式来编写笔记，以便我可以更好地组织和表达我的想法，包括添加图片、格式化文本和结构化内容。

#### 验收标准

1. WHEN 用户编辑笔记 THEN 系统 SHALL 支持 Markdown 语法输入和实时预览
2. WHEN 用户插入图片 THEN 系统 SHALL 支持从相册选择或拍照添加图片到笔记中
3. WHEN 用户使用 Markdown 格式 THEN 系统 SHALL 支持标题、粗体、斜体、列表、链接和代码块等基本语法
4. WHEN 用户查看笔记 THEN 系统 SHALL 渲染 Markdown 内容为格式化的富文本显示
5. WHEN 用户在笔记中添加图片 THEN 系统 SHALL 自动压缩和优化图片大小以节省存储空间
6. WHEN 用户切换编辑/预览模式 THEN 系统 SHALL 提供实时切换功能
7. WHEN 用户输入表格语法 THEN 系统 SHALL 支持 Markdown 表格的创建和显示
8. IF 用户粘贴带格式的文本 THEN 系统 SHALL 自动转换为相应的 Markdown 语法

### 需求 3.4 - 笔记回顾和可视化

**用户故事：** 作为一个读者，我想要通过多种可视化方式来回顾我的笔记，以便我可以更好地理解我的阅读模式和重新发现有价值的内容。

#### 验收标准

1. WHEN 用户选择日历视图 THEN 系统 SHALL 在日历界面上显示每天的笔记数量和阅读活动
2. WHEN 用户点击日历中的特定日期 THEN 系统 SHALL 显示该日期的所有笔记和阅读记录
3. WHEN 用户查看热力图 THEN 系统 SHALL 以颜色深浅显示不同时间段的笔记活跃度
4. WHEN 用户选择随机漫步模式 THEN 系统 SHALL 随机展示历史笔记供用户重新发现
5. WHEN 用户在随机漫步中找到感兴趣的笔记 THEN 系统 SHALL 提供快速跳转到相关书籍的选项
6. WHEN 用户查看月度/年度热力图 THEN 系统 SHALL 显示阅读和笔记创建的时间分布模式
7. WHEN 用户在日历视图中筛选 THEN 系统 SHALL 支持按书籍类型、评分或标签过滤显示
8. IF 用户长时间未添加笔记 THEN 系统 SHALL 在随机漫步中优先显示相关提醒
9. WHEN 用户关联笔记 THEN 系统 SHALL 支持手动建立不同书籍笔记间的链接（如"参考《A 书》P50 笔记"）
10. WHEN 用户查看热力图 THEN 系统 SHALL 支持切换"按小时/按周"时间粒度
11. WHEN 用户导出日历视图 THEN 系统 SHALL 生成可导入手机日历的 ICS 文件

### 需求 3.5 - 笔记与书摘的章节关联

**用户故事：** 作为一个读者，我想要将笔记和书摘与书籍章节关联，以便更精准地定位内容位置。

#### 验收标准

1. WHEN 用户添加笔记或书摘 THEN 系统 SHALL 支持输入关联的章节信息
2. WHEN 用户查看书籍的笔记列表 THEN 系统 SHALL 支持按章节筛选和分组显示
3. WHEN 书籍存在章节信息 THEN 系统 SHALL 在笔记编辑页提供章节选择器（可手动输入）
4. WHEN 笔记包含章节信息 THEN 系统 SHALL 在详情页突出显示章节位置
5. WHEN 用户按章节浏览笔记 THEN 系统 SHALL 按章节顺序排列相关内容

### 需求 4 - 阅读统计和目标

**用户故事：** 作为一个读者，我想要查看我的阅读统计数据并设置阅读目标，以便激励自己保持阅读习惯。

#### 验收标准

1. WHEN 用户访问统计页面 THEN 系统 SHALL 显示总阅读书籍数、总阅读页数、平均阅读速度和各状态书籍统计（包括弃读）
2. WHEN 用户设置年度阅读目标 THEN 系统 SHALL 保存目标并显示当前完成进度
3. WHEN 用户查看阅读历史 THEN 系统 SHALL 以图表形式显示月度和年度阅读趋势
4. WHEN 用户完成阅读目标的里程碑 THEN 系统 SHALL 显示成就通知
5. IF 用户连续多天阅读 THEN 系统 SHALL 显示阅读连续天数统计
6. WHEN 用户设置阅读目标 THEN 系统 SHALL 支持自定义目标类型（年度书籍数/月度时长/每周页数）
7. WHEN 用户查看统计数据 THEN 系统 SHALL 显示"当前数据与上月/去年同期"的对比（如"本月阅读时长较上月增长 20%"）
8. WHEN 计算阅读速度 THEN 系统 SHALL 按"总页数/总阅读时长"自动计算（单位：页/小时）

### 需求 4.1 - 阅读统计详情展示

**用户故事：** 作为一个读者，我想要查看更细致的阅读统计数据，以便全面了解自己的阅读偏好和习惯。

#### 验收标准

1. WHEN 用户查看分类统计 THEN 系统 SHALL 显示各分类书籍的阅读时长占比和完成数量
2. WHEN 用户查看标签统计 THEN 系统 SHALL 以词云形式展示高频标签（大小反映关联书籍数量）
3. WHEN 用户查看阅读时段统计 THEN 系统 SHALL 显示一天中各时段的阅读活跃度分布
4. WHEN 用户查看年度阅读报告 THEN 系统 SHALL 生成包含年度阅读总结、Top3 书籍和阅读趋势的图文报告
5. WHEN 用户比较不同年份统计 THEN 系统 SHALL 支持选择两个年份的数据进行对比展示

### 需求 4.2 - 阅读时间线

**用户故事：** 作为一个读者，我想要以时间轴的方式查看我的阅读历程，以便直观地回顾自己的阅读轨迹和重要节点。

#### 验收标准

1. WHEN 用户查看阅读时间线 THEN 系统 SHALL 以垂直时间轴形式展示所有阅读活动（开始阅读、完成书籍、添加笔记等）
2. WHEN 用户浏览时间线 THEN 系统 SHALL 显示每个节点的关键信息（日期、书籍封面、活动类型、简要描述）
3. WHEN 用户点击时间线节点 THEN 系统 SHALL 跳转到相关详情页面（书籍详情、笔记内容等）
4. WHEN 用户筛选时间线 THEN 系统 SHALL 支持按活动类型（开始阅读/完成书籍/添加笔记/获得勋章）和时间范围筛选
5. WHEN 用户查看月度时间线 THEN 系统 SHALL 提供月度视图，显示该月的主要阅读里程碑
6. WHEN 用户分享时间线 THEN 系统 SHALL 支持生成特定时间段的阅读时间线分享图片
7. WHEN 时间线加载大量数据 THEN 系统 SHALL 采用分页加载或虚拟滚动优化性能
8. WHEN 用户长按时间线节点 THEN 系统 SHALL 提供快捷操作（编辑、删除、分享该节点）

### 需求 5 - 读书勋章系统

**用户故事：** 作为一个读者，我想要通过完成阅读成就来获得勋章，以便激励自己持续阅读并增加阅读的乐趣。

#### 验收标准

1. WHEN 用户完成特定阅读里程碑 THEN 系统 SHALL 自动解锁相应勋章并显示获得通知
2. WHEN 用户查看勋章页面 THEN 系统 SHALL 显示已获得和未获得的勋章，包括获得条件和进度
3. WHEN 用户获得新勋章 THEN 系统 SHALL 播放庆祝动画并记录获得时间
4. WHEN 用户分享勋章 THEN 系统 SHALL 生成包含勋章信息的分享图片
5. IF 用户达到连续阅读天数 THEN 系统 SHALL 解锁相应的坚持类勋章
6. IF 用户完成不同类型书籍阅读 THEN 系统 SHALL 解锁多样性阅读勋章
7. IF 用户达到阅读速度里程碑 THEN 系统 SHALL 解锁阅读效率勋章
8. WHEN 勋章存在等级 THEN 系统 SHALL 提供铜/银/金三级体系（如"连续阅读 7 天（铜）→30 天（银）→100 天（金）"）
9. WHEN 用户查看未获得勋章 THEN 系统 SHALL 显示"当前进度"（如"已读 2 本科技类书，还需 3 本解锁'科技达人'"）
10. WHEN 用户分享勋章 THEN 系统 SHALL 自动生成带书籍封面/阅读数据的分享卡片

### 需求 6 - 用户界面和体验

**用户故事：** 作为一个移动设备用户，我想要一个美观且易用的界面，以便我可以轻松地使用这个应用。

#### 验收标准

1. WHEN 应用启动 THEN 系统 SHALL 使用 Material 3 设计系统显示主界面
2. WHEN 用户在不同页面间导航 THEN 系统 SHALL 提供流畅的转场动画
3. WHEN 用户进行操作 THEN 系统 SHALL 提供适当的触觉反馈和视觉反馈
4. WHEN 应用在不同屏幕尺寸设备上运行 THEN 系统 SHALL 保持响应式布局
5. WHEN 用户使用辅助功能 THEN 系统 SHALL 适配屏幕阅读器（支持内容朗读、焦点导航）
6. WHEN 用户操作列表 THEN 系统 SHALL 支持"左滑删除/右滑标记"手势快捷操作
7. WHEN 应用加载数据 THEN 系统 SHALL 显示骨架屏（替代空白页，提升加载感知）

### 需求 7 - 应用设置与个性化

**用户故事：** 作为用户，我想要自定义应用功能和外观，以便符合个人使用习惯。

#### 验收标准

1. WHEN 用户进入设置页面 THEN 系统 SHALL 提供"通用（通知/备份）""外观（主题/字体）""数据（同步/清理）"分类设置
2. WHEN 用户选择主题 THEN 系统 SHALL 支持"跟随系统/强制浅色/强制深色"三种模式并自动适配深色主题
3. WHEN 用户调整字体 THEN 系统 SHALL 支持全局字体大小调节（5 档可选）
4. WHEN 用户清理缓存 THEN 系统 SHALL 显示可清理的图片缓存/临时文件大小并确认后删除
5. WHEN 用户设置通知 THEN 系统 SHALL 支持单独开关"阅读提醒/勋章解锁/目标进度"通知
6. WHEN 用户自定义首页 THEN 系统 SHALL 支持调整首页显示模块（统计卡片/最近阅读/推荐书籍等）
7. WHEN 用户设置阅读习惯 THEN 系统 SHALL 支持配置默认阅读时长、休息间隔和提醒方式
8. WHEN 用户管理隐私 THEN 系统 SHALL 提供数据使用说明和隐私设置选项
9. WHEN 用户重置应用 THEN 系统 SHALL 提供"重置设置"和"清空所有数据"两种选项并要求二次确认

### 需求 8 - 个人藏书管理

**用户故事：** 作为一个爱书人，我想要在书籍管理的基础上，增加藏书的拥有状态和存放信息，以便更好地管理我的实体书籍收藏。

#### 验收标准

1. WHEN 用户添加或编辑书籍 THEN 系统 SHALL 在原有书籍信息基础上，额外支持设置拥有状态（已拥有/想要购买/已借出/已借入）
2. WHEN 用户查看书籍列表 THEN 系统 SHALL 支持按拥有状态筛选显示，同时保留原有的阅读状态筛选
3. WHEN 用户标记书籍为"已拥有" THEN 系统 SHALL 支持记录存放位置和书籍状态（全新/良好/一般/破损）
4. WHEN 用户记录存放位置 THEN 系统 SHALL 支持自定义位置标签（如"书房-第 2 层-左侧"、"卧室书架"等）
5. WHEN 用户管理借阅记录 THEN 系统 SHALL 支持记录借出/借入的书籍、对方信息、借阅日期和预期归还日期
6. WHEN 借阅到期 THEN 系统 SHALL 发送提醒通知（可设置提前提醒天数）
7. WHEN 用户搜索书籍 THEN 系统 SHALL 在原有搜索基础上，增加按存放位置、拥有状态筛选
8. WHEN 用户查看书籍详情 THEN 系统 SHALL 在原有信息基础上，显示拥有状态、存放位置等藏书信息
9. WHEN 用户扫描书籍条码添加书籍 THEN 系统 SHALL 同时支持设置阅读状态和拥有状态
10. WHEN 用户标记重复书籍 THEN 系统 SHALL 提醒用户已拥有该书籍，避免重复添加

### 需求 8.1 - 购书心愿单

**用户故事：** 作为一个读书爱好者，我想要管理我的购书心愿单，以便规划我的购书计划。

#### 验收标准

1. WHEN 用户添加想要购买的书籍 THEN 系统 SHALL 将书籍添加到心愿单并支持设置购买优先级
2. WHEN 用户查看心愿单 THEN 系统 SHALL 按优先级或添加时间排序显示想要购买的书籍
3. WHEN 用户购买心愿单中的书籍 THEN 系统 SHALL 支持一键将书籍状态从"想要购买"改为"已拥有"
4. WHEN 用户管理心愿单 THEN 系统 SHALL 支持为心愿单书籍添加备注（如购买渠道、预算等）
5. WHEN 用户查看心愿单统计 THEN 系统 SHALL 显示心愿单书籍总数和各分类分布

### 需求 8.2 - 藏书展示和书单

**用户故事：** 作为一个读书爱好者，我想要展示我的藏书和创建主题书单，以便更好地整理和回顾我的收藏。

#### 验收标准

1. WHEN 用户分享藏书 THEN 系统 SHALL 生成精美的藏书展示卡片（包含书籍封面、个人评价、收藏时间）
2. WHEN 用户创建书单 THEN 系统 SHALL 支持从藏书中选择书籍创建主题书单并分享
3. WHEN 用户管理书单 THEN 系统 SHALL 支持创建、编辑、删除个人书单，并为书单添加描述和标签
4. WHEN 用户查看书单 THEN 系统 SHALL 以卡片形式展示书单，显示书单封面、书籍数量和创建时间
5. WHEN 用户导出书单 THEN 系统 SHALL 支持将书单导出为图片或文本格式

### 需求 9 - 数据同步需求

**用户故事：**
- 作为用户，我希望能够将我的书籍数据同步到云端，以便在多设备间保持数据一致性。
- 作为用户，我希望能够选择同步方式（自动/手动、增量/全量），以便控制数据流量和同步频率。
- 作为用户，我希望能够查看同步状态和历史记录，以便了解数据同步情况。
- 作为用户，我希望能够解决数据冲突（如本地和云端数据不一致），以便保持数据的准确性。
- 作为用户，我希望能够在网络不稳定时暂存变更，待网络恢复后自动同步，以便确保数据不丢失。

#### 验收标准

1. 成功实现多设备数据同步，保持数据一致性。
2. 支持多种同步方式和自定义同步频率。
3. 同步状态展示清晰，历史记录可查询。
4. 数据冲突解决机制有效，提供用户选择选项。
5. 离线变更暂存功能可靠，网络恢复后自动同步。

### 需求 10 - 小部件功能需求

**用户故事：**
- 作为用户，我希望能够在手机主屏幕添加书摘漫步小部件，以便随时查看随机书摘。
- 作为用户，我希望能够在手机主屏幕添加阅读提醒小部件，以便查看即将到来的阅读提醒。
- 作为用户，我希望能够自定义小部件的外观和显示内容，以便符合个人喜好。
- 作为用户，我希望能够通过小部件快速访问应用的核心功能，以便提高使用效率。

#### 验收标准

1. 书摘漫步小部件能够随机展示用户添加的书摘。
2. 阅读提醒小部件能够显示即将到来的阅读提醒，并支持快速进入阅读界面。
3. 小部件支持多种尺寸和样式选择，显示内容可自定义。
4. 小部件交互响应迅速，能够快速跳转到应用的相应功能页面。

### 需求 11 - 离线模式需求

**用户故事：**
- 作为用户，我希望能够在没有网络连接时继续使用应用的核心功能，以便随时记录阅读进度和添加笔记。
- 作为用户，我希望能够查看当前网络状态，以便了解是否可以进行数据同步。
- 作为用户，我希望能够在离线模式下暂存变更，待网络恢复后自动同步，以便确保数据不丢失。
- 作为用户，我希望能够设置离线模式下的功能限制和提醒，以便了解哪些功能在离线状态下不可用。

#### 验收标准

1. 应用核心功能（如阅读进度记录、笔记添加等）在离线模式下正常可用。
2. 网络状态展示清晰，支持实时监测和提醒。
3. 离线变更暂存功能可靠，网络恢复后自动同步。
4. 离线模式下不可用的功能有明确提示，不影响核心功能使用。
